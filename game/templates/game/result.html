{% extends 'base.html' %}

{% block content %}

  <h1>게임 전적</h1>

    <span>현재 플레이어의 게임 전적을 보여주는 페이지입니다.</span>
    <hr/>

    <h3>현재 플레이어: {{user.name}}</h3> 

    {% for game in results %}
        <div>
            <span>{{game.pk}}-{{game.player1}} VS {{game.player2}}</span>
            
            {% comment %} {% if game.ended %} {% endcomment %}
            {% if game.is_end == False %}
                {% if user.username == game.host.username %}
                    진행중...
                    <a href="{% url 'game:game_delete' game.id %}">게임 취소</a>
                {% comment %} {% if user.username == game.host %} {% endcomment %}
                {% else %}
                    <a href="{% url 'game:counterattack' game.pk %}">반격 하기</a>
                    

                {% endif %}
            {% else %}          
            {{ game.rule }}      
                {% if user.username == game.host.username %}
                    {{ game.result }}


                {% else %}
                    {% if game.result == 'win' %}
                        lose
                    {% elif game.result == 'lose' %}
                        win
                    {% else %}
                        draw
                    {% endif %}
                {% endif %}
            {% endif %}
                

            <span><a href="">게임정보</a></span>
        </div>

    {% endfor %}
    
{% endblock %}